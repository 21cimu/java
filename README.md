# HDFS Drive - ä¸ªäººäº‘ç›˜ç³»ç»Ÿ

åŸºäº Hadoop HDFS çš„ä¸ªäººäº‘å­˜å‚¨ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„ Web ç•Œé¢è¿›è¡Œæ–‡ä»¶ç®¡ç†ã€ç”¨æˆ·ç®¡ç†å’Œåˆ†äº«åŠŸèƒ½ã€‚

## é¡¹ç›®ç®€ä»‹

HDFS Drive æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„äº‘ç›˜è§£å†³æ–¹æ¡ˆï¼Œåˆ©ç”¨ Hadoop åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰ä½œä¸ºåº•å±‚å­˜å‚¨ï¼Œæä¾›ç±»ä¼¼ç™¾åº¦ç½‘ç›˜ã€Google Drive çš„ç”¨æˆ·ä½“éªŒã€‚ç³»ç»Ÿæ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€ç›®å½•ç®¡ç†ã€æ–‡ä»¶æœç´¢ã€åˆ†äº«é“¾æ¥ã€ç”¨æˆ·æƒé™ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## ä¸»è¦ç‰¹æ€§

### æ–‡ä»¶ç®¡ç†
- âœ… æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ï¼ˆæ”¯æŒæœ€å¤§ 100MBï¼‰
- âœ… æ–‡ä»¶å¤¹åˆ›å»ºä¸ç®¡ç†
- âœ… æ–‡ä»¶/æ–‡ä»¶å¤¹ç§»åŠ¨ã€å¤åˆ¶ã€é‡å‘½å
- âœ… æ–‡ä»¶åˆ é™¤ä¸å›æ”¶ç«™åŠŸèƒ½
- âœ… æ–‡ä»¶æœç´¢ï¼ˆæŒ‰åç§°ã€æ–‡ä»¶æ‰©å±•åï¼‰
- âœ… æ–‡ä»¶é¢„è§ˆï¼ˆæ”¯æŒå¤šç§å›¾ç‰‡ã€è§†é¢‘ã€æ–‡æ¡£æ ¼å¼ï¼‰

### ç”¨æˆ·ç³»ç»Ÿ
- âœ… ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
- âœ… ç”¨æˆ·èµ„æ–™ç®¡ç†ï¼ˆå¤´åƒä¸Šä¼ ï¼‰
- âœ… å¤šç”¨æˆ·éš”ç¦»ï¼ˆæ¯ä¸ªç”¨æˆ·ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ï¼‰
- âœ… ä¼šè¯ç®¡ç†ä¸å®‰å…¨è®¤è¯

### åˆ†äº«åŠŸèƒ½
- âœ… ç”Ÿæˆæ–‡ä»¶/æ–‡ä»¶å¤¹åˆ†äº«é“¾æ¥
- âœ… è®¾ç½®åˆ†äº«è¿‡æœŸæ—¶é—´
- âœ… å…¬å¼€è®¿é—®åˆ†äº«å†…å®¹ï¼ˆæ— éœ€ç™»å½•ï¼‰

### ç®¡ç†åå°
- âœ… ç”¨æˆ·ç®¡ç†ï¼ˆæŸ¥çœ‹ã€åˆ é™¤ç”¨æˆ·ï¼‰
- âœ… ç³»ç»Ÿæ—¥å¿—æŸ¥çœ‹
- âœ… å…¬å‘Šç®¡ç†
- âœ… æ–‡ä»¶ç³»ç»Ÿç»Ÿè®¡

### AI åŠŸèƒ½
- âœ… é›†æˆ AI æœåŠ¡æ¥å£ï¼ˆå¯æ‰©å±•ï¼‰

## æŠ€æœ¯æ ˆ

### åç«¯
- **Java 8** - æ ¸å¿ƒå¼€å‘è¯­è¨€
- **Jakarta EE 6.1** - Servlet API
- **Apache Hadoop 3.3.0** - åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ
- **MySQL 9.0** - ç”¨æˆ·æ•°æ®å­˜å‚¨
- **Maven** - é¡¹ç›®æ„å»ºç®¡ç†

### ä¸»è¦ä¾èµ–åº“
- **Jackson 2.18.0** - JSON åºåˆ—åŒ–
- **Gson 2.8.8** - JSON å¤„ç†
- **Druid 1.2.23** - æ•°æ®åº“è¿æ¥æ± 
- **Commons DBUtils 1.8.1** - æ•°æ®åº“æ“ä½œ
- **Commons IO 2.6** - IO å·¥å…·
- **JUnit 4.13** - å•å…ƒæµ‹è¯•

### å‰ç«¯
- **HTML5 + CSS3** - é¡µé¢ç»“æ„å’Œæ ·å¼
- **åŸç”Ÿ JavaScript** - äº¤äº’é€»è¾‘
- **Flat Notify** - é€šçŸ¥ç»„ä»¶

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Browser   â”‚  ç”¨æˆ·ç•Œé¢ï¼ˆHTML/CSS/JSï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Servlet Container (Tomcat)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Web Layer (Servlets)        â”‚  â”‚
â”‚  â”‚  - FileServlet               â”‚  â”‚
â”‚  â”‚  - DirectoryServlet          â”‚  â”‚
â”‚  â”‚  - UserServlet               â”‚  â”‚
â”‚  â”‚  - ShareServlet              â”‚  â”‚
â”‚  â”‚  - AdminServlets             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Core Services               â”‚  â”‚
â”‚  â”‚  - HdfsService               â”‚  â”‚
â”‚  â”‚  - UserDao                   â”‚  â”‚
â”‚  â”‚  - ShareService              â”‚  â”‚
â”‚  â”‚  - TrashService              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  MySQL Database  â”‚   â”‚
â”‚  - users         â”‚   â”‚
â”‚  - metadata      â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                       â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Hadoop HDFS Cluster    â”‚
          â”‚  - NameNode: node1:8020 â”‚
          â”‚  - DataNodes            â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç¯å¢ƒè¦æ±‚

### å¿…éœ€è½¯ä»¶
- **JDK 8** æˆ–æ›´é«˜ç‰ˆæœ¬
- **Maven 3.x** æˆ–æ›´é«˜ç‰ˆæœ¬
- **MySQL 5.7+** æˆ– **MySQL 8.x**
- **Hadoop 3.3.0** é›†ç¾¤ï¼ˆæˆ–å•æœºä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼‰
- **Tomcat 10.x** æˆ–å…¶ä»–æ”¯æŒ Jakarta EE çš„ Servlet å®¹å™¨

### ç¡¬ä»¶å»ºè®®
- CPU: 2 æ ¸å¿ƒåŠä»¥ä¸Š
- å†…å­˜: 4GB åŠä»¥ä¸Š
- å­˜å‚¨: æ ¹æ®å®é™…æ–‡ä»¶å­˜å‚¨éœ€æ±‚

## å®‰è£…ä¸é…ç½®

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/21cimu/java.git
cd java
```

### 2. é…ç½® MySQL æ•°æ®åº“

åˆ›å»ºæ•°æ®åº“ï¼š

```sql
CREATE DATABASE bigdata CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

ä¿®æ”¹æ•°æ®åº“è¿æ¥é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰ï¼Œç¼–è¾‘æ–‡ä»¶ï¼š
```
src/main/java/com/hdfsdrive/core/UserDao.java
```

é»˜è®¤é…ç½®ï¼š
```java
private static final String JDBC_URL = "jdbc:mysql://localhost:3306/bigdata?useUnicode=true&characterEncoding=utf8&serverTimezone=UTC";
private static final String JDBC_USER = "root";
private static final String JDBC_PASS = "123456";
```

> æ³¨æ„ï¼šé¦–æ¬¡è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»º `users` è¡¨ï¼Œæ— éœ€æ‰‹åŠ¨å»ºè¡¨ã€‚

### 3. é…ç½® Hadoop HDFS

ç¡®ä¿ Hadoop é›†ç¾¤å·²å¯åŠ¨å¹¶å¯è®¿é—®ã€‚é»˜è®¤ HDFS è¿æ¥é…ç½®ï¼š

```
hdfs://node1:8020
ç”¨æˆ·: root
```

å¦‚éœ€ä¿®æ”¹ï¼Œç¼–è¾‘ç›¸å…³ Servlet å’Œé…ç½®æ–‡ä»¶ä¸­çš„ HDFS URIã€‚

### 4. æ„å»ºé¡¹ç›®

```bash
mvn clean package
```

æ„å»ºæˆåŠŸåï¼Œä¼šåœ¨ `target/` ç›®å½•ç”Ÿæˆ WAR åŒ…ï¼š`moudle02_hdfs-1.0-SNAPSHOT.war`

### 5. éƒ¨ç½²åˆ° Tomcat

å°†ç”Ÿæˆçš„ WAR åŒ…å¤åˆ¶åˆ° Tomcat çš„ `webapps` ç›®å½•ï¼š

```bash
cp target/moudle02_hdfs-1.0-SNAPSHOT.war $TOMCAT_HOME/webapps/
```

å¯åŠ¨ Tomcatï¼š

```bash
$TOMCAT_HOME/bin/startup.sh
```

### 6. è®¿é—®ç³»ç»Ÿ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š

```
http://localhost:8080/moudle02_hdfs-1.0-SNAPSHOT/
```

é»˜è®¤ä¼šè·³è½¬åˆ°ç™»å½•é¡µé¢ `login.html`ã€‚

## ä½¿ç”¨è¯´æ˜

### ç”¨æˆ·æ“ä½œ

1. **æ³¨å†Œè´¦æˆ·**ï¼šåœ¨ç™»å½•é¡µé¢ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®ï¼Œå¡«å†™ç”¨æˆ·åå’Œå¯†ç 
2. **ç™»å½•ç³»ç»Ÿ**ï¼šä½¿ç”¨æ³¨å†Œçš„è´¦æˆ·ç™»å½•
3. **ä¸Šä¼ æ–‡ä»¶**ï¼šç‚¹å‡»"ä¸Šä¼ "æŒ‰é’®ï¼Œé€‰æ‹©æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°äº‘ç›˜
4. **ç®¡ç†æ–‡ä»¶**ï¼š
   - åˆ›å»ºæ–‡ä»¶å¤¹
   - é‡å‘½åæ–‡ä»¶/æ–‡ä»¶å¤¹
   - ç§»åŠ¨/å¤åˆ¶æ–‡ä»¶
   - åˆ é™¤æ–‡ä»¶ï¼ˆè¿›å…¥å›æ”¶ç«™ï¼‰
   - ä»å›æ”¶ç«™æ¢å¤æ–‡ä»¶
5. **åˆ†äº«æ–‡ä»¶**ï¼šé€‰æ‹©æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»"åˆ†äº«"ï¼Œç”Ÿæˆåˆ†äº«é“¾æ¥
6. **æœç´¢æ–‡ä»¶**ï¼šä½¿ç”¨æœç´¢æ¡†æŒ‰æ–‡ä»¶åæˆ–æ‰©å±•åæœç´¢

### å‘½ä»¤è¡Œå·¥å…·

é¡¹ç›®æä¾›äº†å‘½ä»¤è¡Œå·¥å…· `HdfsDriveApp` ç”¨äºç›´æ¥æ“ä½œ HDFSï¼š

```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# ä¸Šä¼ æ–‡ä»¶
java -cp "target/classes:$(hadoop classpath)" com.hdfsdrive.app.HdfsDriveApp upload /local/path /hdfs/path

# ä¸‹è½½æ–‡ä»¶
java -cp "target/classes:$(hadoop classpath)" com.hdfsdrive.app.HdfsDriveApp download /hdfs/path /local/path

# åˆ›å»ºç›®å½•
java -cp "target/classes:$(hadoop classpath)" com.hdfsdrive.app.HdfsDriveApp mkdir /hdfs/directory

# åˆ é™¤æ–‡ä»¶
java -cp "target/classes:$(hadoop classpath)" com.hdfsdrive.app.HdfsDriveApp delete /hdfs/path true

# æœç´¢æ–‡ä»¶
java -cp "target/classes:$(hadoop classpath)" com.hdfsdrive.app.HdfsDriveApp search /hdfs/dir keyword

# åˆ—å‡ºç›®å½•
java -cp "target/classes:$(hadoop classpath)" com.hdfsdrive.app.HdfsDriveApp list /hdfs/directory
```

## API æ¥å£æ–‡æ¡£

### è®¤è¯æ¥å£

#### POST `/api/auth`
ç”¨æˆ·ç™»å½•å’Œæ³¨å†Œ

**è¯·æ±‚å‚æ•°ï¼š**
- `action`: `login` æˆ– `register`
- `username`: ç”¨æˆ·å
- `password`: å¯†ç 

**è¿”å›ï¼š**
```json
{
  "success": true,
  "user": {
    "id": 1,
    "username": "testuser",
    "avatar": "..."
  }
}
```

### æ–‡ä»¶æ“ä½œæ¥å£

#### POST `/api/file/*`
æ–‡ä»¶ä¸Šä¼ ã€ç§»åŠ¨ã€å¤åˆ¶ã€ä¿å­˜

**æ”¯æŒçš„ actionï¼š**
- `upload`: ä¸Šä¼ æ–‡ä»¶ï¼ˆmultipart/form-dataï¼‰
- `move`: ç§»åŠ¨æ–‡ä»¶ï¼ˆå‚æ•°ï¼šsrc, dstï¼‰
- `copy`: å¤åˆ¶æ–‡ä»¶ï¼ˆå‚æ•°ï¼šsrc, dstï¼‰
- `save`: ä¿å­˜æ–‡ä»¶å†…å®¹ï¼ˆå‚æ•°ï¼špath, contentï¼‰
- `restore`: ä»å›æ”¶ç«™æ¢å¤æ–‡ä»¶

#### GET `/api/file/*`
æ–‡ä»¶ä¸‹è½½

**å‚æ•°ï¼š**
- `action=download`
- `path`: HDFS æ–‡ä»¶è·¯å¾„

### ç›®å½•æ“ä½œæ¥å£

#### GET `/api/directory/*`
è·å–ç›®å½•åˆ—è¡¨

**å‚æ•°ï¼š**
- `action=list&path=/path/to/dir`: åˆ—å‡ºç›®å½•å†…å®¹
- `action=search&path=/path&keyword=xxx`: æœç´¢æ–‡ä»¶
- `action=searchByExt&path=/path&extensions=jpg,png`: æŒ‰æ‰©å±•åæœç´¢
- `action=trash`: è·å–å›æ”¶ç«™åˆ—è¡¨

#### POST `/api/directory/*`
ç›®å½•æ“ä½œ

**æ”¯æŒçš„ actionï¼š**
- `mkdir`: åˆ›å»ºç›®å½•ï¼ˆå‚æ•°ï¼špathï¼‰
- `delete`: åˆ é™¤æ–‡ä»¶/ç›®å½•ï¼ˆå‚æ•°ï¼špath, recursiveï¼‰
- `clearTrash`: æ¸…ç©ºå›æ”¶ç«™

### åˆ†äº«æ¥å£

#### POST `/api/share/*`
åˆ›å»ºåˆ†äº«é“¾æ¥

**å‚æ•°ï¼š**
- `action=create`
- `path`: æ–‡ä»¶/ç›®å½•è·¯å¾„
- `expireDays`: è¿‡æœŸå¤©æ•°ï¼ˆ0 è¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼‰

**è¿”å›ï¼š**
```json
{
  "id": "uuid-string",
  "url": "/share.html?id=uuid-string"
}
```

#### GET `/api/share/public`
è·å–åˆ†äº«å†…å®¹ï¼ˆæ— éœ€ç™»å½•ï¼‰

**å‚æ•°ï¼š**
- `id`: åˆ†äº« ID
- `action`: `meta` æˆ– `download`

### ç”¨æˆ·æ¥å£

#### GET `/api/user`
è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

#### POST `/api/user`
æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**å‚æ•°ï¼š**
- `action=updateAvatar`: æ›´æ–°å¤´åƒï¼ˆmultipart/form-dataï¼‰

### ç®¡ç†æ¥å£

#### GET `/api/admin/users`
è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆéœ€ç®¡ç†å‘˜æƒé™ï¼‰

#### DELETE `/api/admin/users/*`
åˆ é™¤ç”¨æˆ·

#### GET `/api/admin/logs`
è·å–ç³»ç»Ÿæ—¥å¿—

#### GET/POST `/api/admin/announcements`
å…¬å‘Šç®¡ç†

#### GET `/api/admin/files`
è·å–æ–‡ä»¶ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯

## é¡¹ç›®ç»“æ„

```
java/
â”œâ”€â”€ pom.xml                          # Maven é¡¹ç›®é…ç½®
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/
â”‚       â”‚   â””â”€â”€ com/hdfsdrive/
â”‚       â”‚       â”œâ”€â”€ app/             # å‘½ä»¤è¡Œåº”ç”¨
â”‚       â”‚       â”‚   â”œâ”€â”€ HdfsDriveApp.java
â”‚       â”‚       â”‚   â””â”€â”€ Demo01HDFS.java
â”‚       â”‚       â”œâ”€â”€ core/            # æ ¸å¿ƒæœåŠ¡å±‚
â”‚       â”‚       â”‚   â”œâ”€â”€ HdfsService.java      # HDFS æ“ä½œæœåŠ¡
â”‚       â”‚       â”‚   â”œâ”€â”€ UserDao.java          # ç”¨æˆ·æ•°æ®è®¿é—®
â”‚       â”‚       â”‚   â”œâ”€â”€ User.java             # ç”¨æˆ·å®ä½“
â”‚       â”‚       â”‚   â”œâ”€â”€ ShareService.java     # åˆ†äº«æœåŠ¡
â”‚       â”‚       â”‚   â”œâ”€â”€ TrashService.java     # å›æ”¶ç«™æœåŠ¡
â”‚       â”‚       â”‚   â””â”€â”€ HashUtil.java         # åŠ å¯†å·¥å…·
â”‚       â”‚       â””â”€â”€ web/             # Web å±‚ï¼ˆServletsï¼‰
â”‚       â”‚           â”œâ”€â”€ common/
â”‚       â”‚           â”‚   â””â”€â”€ AbstractHdfsServlet.java
â”‚       â”‚           â”œâ”€â”€ file/
â”‚       â”‚           â”‚   â”œâ”€â”€ FileServlet.java        # æ–‡ä»¶æ“ä½œ
â”‚       â”‚           â”‚   â””â”€â”€ DirectoryServlet.java   # ç›®å½•æ“ä½œ
â”‚       â”‚           â”œâ”€â”€ user/
â”‚       â”‚           â”‚   â”œâ”€â”€ AuthServlet.java        # è®¤è¯
â”‚       â”‚           â”‚   â””â”€â”€ UserServlet.java        # ç”¨æˆ·ç®¡ç†
â”‚       â”‚           â”œâ”€â”€ share/
â”‚       â”‚           â”‚   â”œâ”€â”€ ShareServlet.java       # åˆ†äº«ï¼ˆéœ€ç™»å½•ï¼‰
â”‚       â”‚           â”‚   â””â”€â”€ SharePublicServlet.java # å…¬å¼€åˆ†äº«
â”‚       â”‚           â”œâ”€â”€ admin/       # ç®¡ç†åå°
â”‚       â”‚           â”‚   â”œâ”€â”€ AdminUsersServlet.java
â”‚       â”‚           â”‚   â”œâ”€â”€ AdminLogsServlet.java
â”‚       â”‚           â”‚   â”œâ”€â”€ AdminAnnouncementsServlet.java
â”‚       â”‚           â”‚   â””â”€â”€ AdminFilesServlet.java
â”‚       â”‚           â”œâ”€â”€ AiServlet.java          # AI åŠŸèƒ½
â”‚       â”‚           â””â”€â”€ DebugServlet.java       # è°ƒè¯•æ¥å£
â”‚       â”œâ”€â”€ resources/               # èµ„æºæ–‡ä»¶
â”‚       â””â”€â”€ webapp/                  # Web å‰ç«¯èµ„æº
â”‚           â”œâ”€â”€ WEB-INF/
â”‚           â”‚   â””â”€â”€ web.xml         # Servlet é…ç½®
â”‚           â”œâ”€â”€ index.html          # ä¸»é¡µï¼ˆæ–‡ä»¶ç®¡ç†ï¼‰
â”‚           â”œâ”€â”€ login.html          # ç™»å½•é¡µ
â”‚           â”œâ”€â”€ user.html           # ç”¨æˆ·ä¸­å¿ƒ
â”‚           â”œâ”€â”€ admin.html          # ç®¡ç†åå°
â”‚           â”œâ”€â”€ share.html          # åˆ†äº«é¡µé¢
â”‚           â”œâ”€â”€ preview.html        # æ–‡ä»¶é¢„è§ˆ
â”‚           â”œâ”€â”€ ai.html             # AI åŠŸèƒ½é¡µ
â”‚           â”œâ”€â”€ css/                # æ ·å¼æ–‡ä»¶
â”‚           â”œâ”€â”€ js/                 # JavaScript è„šæœ¬
â”‚           â”‚   â”œâ”€â”€ app.js          # ä¸»åº”ç”¨é€»è¾‘
â”‚           â”‚   â”œâ”€â”€ admin.js        # ç®¡ç†åå°é€»è¾‘
â”‚           â”‚   â”œâ”€â”€ user.js         # ç”¨æˆ·ä¸­å¿ƒé€»è¾‘
â”‚           â”‚   â””â”€â”€ notify.js       # é€šçŸ¥å·¥å…·
â”‚           â””â”€â”€ notify/             # é€šçŸ¥ç»„ä»¶
â”œâ”€â”€ æ ¼å¼.txt                         # æ”¯æŒçš„æ–‡ä»¶æ ¼å¼è¯´æ˜
â””â”€â”€ README.md                       # æœ¬æ–‡ä»¶
```

## æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

### å›¾ç‰‡æ ¼å¼
bmp, jpg, png, tif, gif, pcx, tga, exif, fpx, svg, psd, cdr, pcd, dxf, ufo, eps, ai, raw, wmf, webp, avif, apng

### è§†é¢‘æ ¼å¼
MP4, MOV, WMV, FLV, AVI, AVCHD, WebM, MKV

### å‹ç¼©åŒ…æ ¼å¼
7z, rar, zip, tgz

### æ–‡æ¡£æ ¼å¼
pdf, docx, xlsx, log, txt

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ·»åŠ æ–°çš„ Servlet**ï¼š
   - åœ¨ `src/main/java/com/hdfsdrive/web/` ä¸‹åˆ›å»ºæ–°çš„ Servlet ç±»
   - ä½¿ç”¨ `@WebServlet` æ³¨è§£é…ç½®è·¯ç”±
   - ç»§æ‰¿ `AbstractHdfsServlet` ä»¥è·å¾— HDFS æœåŠ¡æ”¯æŒ

2. **æ‰©å±•æ ¸å¿ƒæœåŠ¡**ï¼š
   - åœ¨ `com.hdfsdrive.core` åŒ…ä¸‹æ·»åŠ æ–°çš„æœåŠ¡ç±»
   - å®ç°ä¸šåŠ¡é€»è¾‘å¹¶æä¾›ç»™ Servlet è°ƒç”¨

3. **å‰ç«¯å¼€å‘**ï¼š
   - åœ¨ `src/main/webapp/` ä¸‹æ·»åŠ  HTML/CSS/JS æ–‡ä»¶
   - ä½¿ç”¨ `fetch` API è°ƒç”¨åç«¯æ¥å£

### è¿è¡Œæµ‹è¯•

```bash
mvn test
```

### ä»£ç é£æ ¼

é¡¹ç›®ä½¿ç”¨æ ‡å‡†çš„ Java ç¼–ç è§„èŒƒï¼Œå»ºè®®ä½¿ç”¨ IDEï¼ˆå¦‚ IntelliJ IDEAï¼‰è¿›è¡Œå¼€å‘ã€‚

## å¸¸è§é—®é¢˜

### Q: æ— æ³•è¿æ¥åˆ° HDFSï¼Ÿ
A: æ£€æŸ¥ Hadoop é›†ç¾¤æ˜¯å¦å¯åŠ¨ï¼Œç¡®è®¤ `hdfs://node1:8020` å¯è®¿é—®ã€‚å¯ä»¥ä¿®æ”¹ä»£ç ä¸­çš„ HDFS URI é…ç½®ã€‚

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
A: ç¡®è®¤ MySQL æœåŠ¡å·²å¯åŠ¨ï¼Œæ•°æ®åº“ `bigdata` å·²åˆ›å»ºï¼Œç”¨æˆ·åå’Œå¯†ç æ­£ç¡®ã€‚

### Q: ä¸Šä¼ æ–‡ä»¶å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡ 100MB é™åˆ¶ï¼Œæ£€æŸ¥ HDFS å­˜å‚¨ç©ºé—´æ˜¯å¦å……è¶³ã€‚

### Q: ç”¨æˆ·ç™»å½•åæ˜¾ç¤º"æœªæˆæƒ"ï¼Ÿ
A: æ£€æŸ¥ä¼šè¯æ˜¯å¦è¿‡æœŸï¼Œç¡®è®¤æµè§ˆå™¨å…è®¸ Cookieã€‚

### Q: å¦‚ä½•ä¿®æ”¹æ–‡ä»¶å¤§å°é™åˆ¶ï¼Ÿ
A: ä¿®æ”¹ `FileServlet.java` ä¸­çš„ `@MultipartConfig` æ³¨è§£å‚æ•°ã€‚

## å®‰å…¨å»ºè®®

âš ï¸ **æ³¨æ„äº‹é¡¹ï¼š**

1. **å¯†ç å­˜å‚¨**ï¼šå½“å‰ç‰ˆæœ¬å¯†ç ä»¥æ˜æ–‡å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨åŠ å¯†ï¼ˆå¦‚ BCryptï¼‰
2. **HTTPS**ï¼šç”Ÿäº§ç¯å¢ƒåº”å¯ç”¨ HTTPS ä¿æŠ¤æ•°æ®ä¼ è¾“å®‰å…¨
3. **è®¿é—®æ§åˆ¶**ï¼šå»ºè®®æ·»åŠ æ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶å’Œæ–‡ä»¶è®¿é—®å®¡è®¡
4. **SQL æ³¨å…¥**ï¼šå½“å‰ä½¿ç”¨ PreparedStatementï¼Œå·²æœ‰åŸºæœ¬é˜²æŠ¤
5. **æ–‡ä»¶ä¸Šä¼ **ï¼šå»ºè®®æ·»åŠ æ–‡ä»¶ç±»å‹éªŒè¯å’Œç—…æ¯’æ‰«æ
6. **åˆ†äº«é“¾æ¥**ï¼šè€ƒè™‘æ·»åŠ å¯†ç ä¿æŠ¤å’Œè®¿é—®æ¬¡æ•°é™åˆ¶

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. å¯ç”¨ HDFS ç¼“å­˜æœºåˆ¶
2. ä½¿ç”¨ Redis ç¼“å­˜ç”¨æˆ·ä¼šè¯å’Œçƒ­é—¨æ–‡ä»¶å…ƒæ•°æ®
3. å‰ç«¯æ·»åŠ æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼ˆæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼‰
4. ä½¿ç”¨ CDN åŠ é€Ÿé™æ€èµ„æºè®¿é—®
5. æ•°æ®åº“è¯»å†™åˆ†ç¦»å’Œè¿æ¥æ± ä¼˜åŒ–

## æœªæ¥è§„åˆ’

- [ ] æ–‡ä»¶åœ¨çº¿ç¼–è¾‘åŠŸèƒ½
- [ ] æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶
- [ ] å¤šäººåä½œå’Œè¯„è®ºåŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯ APP
- [ ] æ–‡ä»¶å…¨æ–‡æœç´¢ï¼ˆé›†æˆ Elasticsearchï¼‰
- [ ] è§†é¢‘è½¬ç å’Œè‡ªé€‚åº”æ’­æ”¾
- [ ] ç¦»çº¿ä¸‹è½½åŠŸèƒ½
- [ ] ä¼ä¸šçº§å¤šç§Ÿæˆ·æ”¯æŒ
- [ ] å¯¹è±¡å­˜å‚¨ï¼ˆS3ï¼‰å…¼å®¹æ¥å£

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€ï¼š[https://github.com/21cimu/java](https://github.com/21cimu/java)
- é—®é¢˜åé¦ˆï¼š[Issues](https://github.com/21cimu/java/issues)

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [Apache Hadoop](https://hadoop.apache.org/)
- [MySQL](https://www.mysql.com/)
- [Jackson](https://github.com/FasterXML/jackson)
- [Apache Commons](https://commons.apache.org/)

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
